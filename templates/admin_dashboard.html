<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beautique PH</title>
    {% include 'header_links.html' %}
</head>
<body>
    {% include 'nav-admin.html' %}
    <div class="container d-flex flex-row">
        {% include 'header.html' %}
        <div class="container body-color">
            <div id="viewStudentRecord">
            </div>
            <div class="row">
                <div class="d-flex justify-content-between">
                    <h4 >Dashboards</h4>
                    <div>
                        <select name="" class="form-control" id="showSalesDiv">
                            <option value="daily">Show Daily</option>
                            <option value="monthly">Show Monthly</option>
                            <option value="yearly">Show Yearly</option>
                        </select>
                    </div>
                </div>
                <div class="row g-2 m-0">
                    <div class="col-12 col-md-6">
                        <div class="border rounded-4 p-3" style="background: linear-gradient(135deg, #d0f2f6, #b9e1fc, #358dcf)">
                            <div class="row">
                                <div class="col-2">
                                    <div style="width: 90px;">
                                        <img style="object-fit: cover; width: 100%; height: 100%" src="../static/img/rocket.png" alt="">
                                    </div>
                                </div>
                                <div class="col-10">
                                    <h3 class="fw-bolder">
                                        <span id="mainTime">12:50:00</span>
                                        <span id="ampm" style="font-size: 1.5rem;">PM</span>
                                    </h3>
                                    <p id="currentMonth"></p>
                                    <script>
                                        function updateCurrentMonth() {
                                            const currentDate = new Date(); // Get the current date
                                            const options = { month: 'long', day: 'numeric', year: 'numeric' }; // Define the format
                                            const formattedDate = currentDate.toLocaleDateString('en-US', options); // Format the date
                                            document.getElementById('currentMonth').innerText = formattedDate; // Update the <h3> element
                                        }

                                        updateCurrentMonth(); // Call the function to update the month on page load
                                    </script>
                                </div>
                            </div>
                        </div>
                        
                        <script>
                            function updateTimeAndDate() {
                                const now = new Date();
                        
                                // Format time as 12-hour AM/PM with seconds
                                let hours = now.getHours();
                                const minutes = now.getMinutes();
                                const seconds = now.getSeconds();
                                const ampm = hours >= 12 ? 'PM' : 'AM';
                                hours = hours % 12;
                                hours = hours ? hours : 12; // The hour '0' should be '12'
                                
                                // Format the time (hours, minutes, seconds)
                                const formattedTime = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        
                                // Format date as Month Day, Year
                                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                                const formattedDate = now.toLocaleDateString('en-US', options);
                        
                                // Update the elements
                                document.getElementById('mainTime').textContent = formattedTime; // Update time without AM/PM
                                document.getElementById('ampm').textContent = ampm; // Update AM/PM
                                document.getElementById('currentDate').textContent = formattedDate; // Update date
                            }
                        
                            // Call updateTimeAndDate every second
                            setInterval(updateTimeAndDate, 1000);
                        
                            // Call it immediately to set the current time and date on load
                            updateTimeAndDate();
                        </script>
                        
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="border rounded-4 p-3" >
                            <div class="row">
                                <div class="col-4">
                                    <div style="width: 70px;">
                                        <img style="object-fit: cover; width: 100%; height: 100%" src="../static/img/admin.png" alt="">
                                    </div>
                                </div>
                                <div class="col-8">
                                    <h3 class="fw-bolder" id="admin_count">0</h3>
                                    <p>Admin</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-md-3">
                        <div class="border rounded-4 p-3" >
                            <div class="row">
                                <div class="col-4">
                                    <div style="width: 70px;">
                                        <img style="object-fit: cover; width: 100%; height: 100%" src="../static/img/student.png" alt="">
                                    </div>
                                </div>
                                <div class="col-8">
                                    <h3 class="fw-bolder" id="customer_count">0</h3>
                                    <p>Customers</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            <div class="row mt-3">
                <div class="row g-3 m-0">
                    <div class="col-12 col-md-6">
                        <div class="border rounded-4 p-3">
                            <div class="row">
                                <div class="col-2">
                                    <div style="width: 70px;">
                                        <img style="object-fit: cover; width: 100%; height: 100%" src="../static/img/store.png" alt="">
                                    </div>
                                </div>
                                <div class="col-10">
                                    <h3 class="fw-bolder">
                                        <span id="sales_today">₱0.00</span>
                                    </h3>
                                    <p>Today Store Sales</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="border rounded-4 p-3" >
                            <div class="row">
                                <div class="col-2">
                                    <div style="width: 70px;">
                                        <img style="object-fit: cover; width: 100%; height: 100%" src="../static/img/calendar.png" alt="">
                                    </div>
                                </div>
                                <div class="col-10">
                                    <h3 class="fw-bolder">
                                        <span id="sales_month">₱0.00</span>
                                    </h3>
                                    <p>October Store Sales</p>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                </div>
            </div>
            <div class="row mt-3 sales-div" id="dailyDiv">
                <div class="row g-3 m-0">
                    <div class="col-12 col-md-12">
                        <div class="border rounded-4 p-3">
                            <div class="d-flex justify-content-between align-items-end">
                                <h4 class="ms-3 mt-3">Daily Sales </h4>
                                <select name="chartType" class="form-select text-muted mb-3 w-25" id="chartTypeSelect">
                                    <option value="bar">Show Bar Graph</option>
                                    <option value="area">Show Area</option>
                                </select>
                            </div>
                            <div id="dailySalesChart"></div>
                        </div>
                    </div>                
                </div>
            </div>
            <div class="row mt-3 sales-div" id="monthlyDiv"  style="display: none;">
                <div class="row g-3 m-0">
                    <div class="col-12 col-md-12">
                        <div class="border rounded-4 p-3">
                            <div class="d-flex justify-content-between align-items-end">
                                <h4 class="ms-3 mt-3">Monthly Sales </h4>
                                <select name="chartType" class="form-select text-muted mb-3 w-25" id="chartTypeSelectMonthly">
                                    <option value="area">Show Area</option>
                                    <option value="bar">Show Bar Graph</option>
                                </select>
                            </div>
                            <div id="monthlySalesChart"></div>                        
                        </div>                        
                    </div>                
                </div>
            </div>
            <div class="row mt-3 mb-5 sales-div" id="yearlyDiv"  style="display: none;">
                <div class="row g-3 m-0">
                    <div class="col-12 col-md-12">
                        <div class="border rounded-4 p-3">
                            <div class="d-flex justify-content-between align-items-end">
                                <h4 class="ms-3 mt-3">Yearly Sales </h4>
                            </div>
                            <div class="d-flex flex-row justify-content-evenly">
                                <div id="storeSalesChartYear"></div>
                                <div id="shopeeSalesChartYear"></div>
                            </div>
                       
                        </div>                        
                    </div>                
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const selectElement = document.getElementById('showSalesDiv');
                const salesDivs = document.querySelectorAll('.sales-div');
            
                // Function to show the selected div and hide others
                function updateVisibility() {
                    const selectedValue = selectElement.value;
            
                    // Hide all sales divs
                    salesDivs.forEach(div => div.style.display = 'none');
            
                    // Show the div matching the selected value
                    const selectedDiv = document.getElementById(`${selectedValue}Div`);
                    if (selectedDiv) {
                        selectedDiv.style.display = 'block';
                    }
                }
            
                // Attach event listener to dropdown
                selectElement.addEventListener('change', updateVisibility);
            
                // Initialize the visibility on page load
                updateVisibility();
            });
            
        </script>
    </div>
    {% include 'footer_links.html' %}
</body>
</html>